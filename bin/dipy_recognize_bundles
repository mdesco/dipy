#! /usr/bin/env python
from dipy.fixes import argparse as arg
from dipy.workflows.segment import recognize_bundles_flow

parser = arg.ArgumentParser()

parser.add_argument('streamlines', action='store')
parser.add_argument('--model_bundles', action='store', dest='model_bundles')
parser.add_argument('--model_streamlines', action='store',
                    dest='model_streamlines')
parser.add_argument('--out_dir', action='store', dest='out_dir')
parser.add_argument('--close_centroids_thr', action='store',
                    dest='close_centroids_thr', default=str(20))
parser.add_argument('--clean_thr', action='store',
                    dest='clean_thr', default=str(5))
parser.add_argument('--local_slr', action='store',
                    dest='local_slr', default=str(1))
parser.add_argument('--expand_thr', action='store',
                    dest='expand_thr')
parser.add_argument('--scale_range', action='store',
                    dest='scale_range', default='0.8:1.2')
parser.add_argument('--disp', action='store', default=0, 
                    dest='disp')

if __name__ == '__main__':

    args = parser.parse_args()

    print(args)

    recognize_bundles_flow(args.streamlines, args.model_bundles,
                           args.model_streamlines, args.out_dir,
                           args.close_centroids_thr, args.clean_thr,
                           args.local_slr, args.expand_thr,
                           args.scale_range, disp=args.disp)
